{% extends "base.html" %}

{% block content %}

    <div class="container text-center">
        <h1 class="my-5">See any PoKÃ©mon!</h1>
        <form action="" method="post" novalidate>
            {{ form.hidden_tag() }}
            <p>{{ form.name(class="form-label", placeholder="Catch em' all") }}<br></p>
            <p>{{ form.submit(class="btn btn-primary") }}</p>
            <p>{{error}}</p>
        </form>
    </div>
    {% if pokemon %}
    <div class="card mx-auto mb-5 border-dark" style="width: 24rem;">
        <img src={{pokemon["f_shiny"]}} class="card-img-top" alt="pokemon">
        <div class="card-body text-dark bg-light">
          <h2 class="card-title mb-5">{{pokemon['name'].capitalize()}}<span style="float: right;"><button id="playsound" type="button" class="btn btn-primary">Hear cry!</button></span></h2>
          <audio id="sound" src="https://play.pokemonshowdown.com/audio/cries/{{pokemon['name']}}.mp3"></audio>
          <script>   
            const mySound = document.getElementById("sound");   
            const correctButton = document.getElementById("playsound");
            correctButton.addEventListener("click", function(){ mySound.play(); });   
          </script> 
          <h5 class="my-2">Abilities:</h5>
          <ul class="list-group list-group-flush">
            {% for ability in pokemon['abilities'] %}
          <li class="list-group-item text-muted">{{ability.capitalize()}}</li>
            {% endfor %}
        </ul>
        <h5 class="my-2">Stats:</h5>
        <ul class="list-group list-group-flush">
            {% for stat in pokemon['stats'] %}
            {% for x,y in stat.items() %}
          <li class="list-group-item text-muted">{{x.capitalize()}}: {{y}}</li>
            {% endfor %}
            {% endfor %}
        </ul>
        </div>
      </div>
    {% endif %}

{% endblock %}